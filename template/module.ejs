window.modules['<%= fileName %>'] = window.modules['<%= fileName %>'] || function(require){
    var module = {exports:{},filename:'<%= fileName %>'},
        __filename = '<%= fileName %>',
        __dirname = '<%= dirName %>',
        exports = module.exports,
        modules;    // overwrites function scope var

    try {   // trying to create a nice error message

// MODULE <%= fileName %> START /////////////////////////////
<%= moduleContent %>
// MODULE <%= fileName %> END ///////////////////////////////

    } catch (err) {throw new Error('Error in module <%= fileName %>\n' + err.message);}
    return module.exports;
};